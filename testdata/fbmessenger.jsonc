{
	"commands": [
		{
			"run_command": "nettest/run",
			"with_arguments": {
				"experimental_flags": {
					"dsl": true
				},
				"nettest_name": "facebook_messenger",
				"report_id": "20230406T142431Z_facebookmessenger_IT_30722_n1_nLq4AP3YQWmW8hg6",
				"suite_name": "im",
				"targets": {
					"func": "measure_multiple_domains",
					"arguments": {},
					"children": [
						{
							"func": "compose",
							"arguments": {},
							"children": [
								{
									"func": "domain_name",
									"arguments": {
										"domain": "stun.fbsbx.com"
									},
									"children": []
								},
								{
									"func": "dns_lookup_getaddrinfo",
									"arguments": {},
									"children": []
								},
								{
									"func": "if_func_exists",
									"arguments": {},
									"children": [
										{
											"func": "fbmessenger_dns_consistency_check",
											"arguments": {
												"endpoint_name": "stun"
											},
											"children": []
										}
									]
								},
								{
									"func": "discard",
									"arguments": {},
									"children": []
								}
							]
						},
						{
							"func": "compose",
							"arguments": {},
							"children": [
								{
									"func": "domain_name",
									"arguments": {
										"domain": "b-api.facebook.com"
									},
									"children": []
								},
								{
									"func": "dns_lookup_getaddrinfo",
									"arguments": {},
									"children": []
								},
								{
									"func": "if_func_exists",
									"arguments": {},
									"children": [
										{
											"func": "fbmessenger_dns_consistency_check",
											"arguments": {
												"endpoint_name": "b_api"
											},
											"children": []
										}
									]
								},
								{
									"func": "make_endpoints_for_port",
									"arguments": {
										"port": 443
									},
									"children": []
								},
								{
									"func": "new_endpoint_pipeline",
									"arguments": {},
									"children": [
										{
											"func": "tcp_connect",
											"arguments": {},
											"children": []
										},
										{
											"func": "if_func_exists",
											"arguments": {},
											"children": [
												{
													"func": "fbmessenger_tcp_reachability_check",
													"arguments": {
														"endpoint_name": "b_api"
													},
													"children": []
												}
											]
										},
										{
											"func": "discard",
											"arguments": {},
											"children": []
										}
									]
								}
							]
						},
						{
							"func": "compose",
							"arguments": {},
							"children": [
								{
									"func": "domain_name",
									"arguments": {
										"domain": "b-graph.facebook.com"
									},
									"children": []
								},
								{
									"func": "dns_lookup_getaddrinfo",
									"arguments": {},
									"children": []
								},
								{
									"func": "if_func_exists",
									"arguments": {},
									"children": [
										{
											"func": "fbmessenger_dns_consistency_check",
											"arguments": {
												"endpoint_name": "b_graph"
											},
											"children": []
										}
									]
								},
								{
									"func": "make_endpoints_for_port",
									"arguments": {
										"port": 443
									},
									"children": []
								},
								{
									"func": "new_endpoint_pipeline",
									"arguments": {},
									"children": [
										{
											"func": "tcp_connect",
											"arguments": {},
											"children": []
										},
										{
											"func": "if_func_exists",
											"arguments": {},
											"children": [
												{
													"func": "fbmessenger_tcp_reachability_check",
													"arguments": {
														"endpoint_name": "b_graph"
													},
													"children": []
												}
											]
										},
										{
											"func": "discard",
											"arguments": {},
											"children": []
										}
									]
								}
							]
						},
						{
							"func": "compose",
							"arguments": {},
							"children": [
								{
									"func": "domain_name",
									"arguments": {
										"domain": "edge-mqtt.facebook.com"
									},
									"children": []
								},
								{
									"func": "dns_lookup_getaddrinfo",
									"arguments": {},
									"children": []
								},
								{
									"func": "if_func_exists",
									"arguments": {},
									"children": [
										{
											"func": "fbmessenger_dns_consistency_check",
											"arguments": {
												"endpoint_name": "edge"
											},
											"children": []
										}
									]
								},
								{
									"func": "make_endpoints_for_port",
									"arguments": {
										"port": 443
									},
									"children": []
								},
								{
									"func": "new_endpoint_pipeline",
									"arguments": {},
									"children": [
										{
											"func": "tcp_connect",
											"arguments": {},
											"children": []
										},
										{
											"func": "if_func_exists",
											"arguments": {},
											"children": [
												{
													"func": "fbmessenger_tcp_reachability_check",
													"arguments": {
														"endpoint_name": "edge"
													},
													"children": []
												}
											]
										},
										{
											"func": "discard",
											"arguments": {},
											"children": []
										}
									]
								}
							]
						},
						{
							"func": "compose",
							"arguments": {},
							"children": [
								{
									"func": "domain_name",
									"arguments": {
										"domain": "external.xx.fbcdn.net"
									},
									"children": []
								},
								{
									"func": "dns_lookup_getaddrinfo",
									"arguments": {},
									"children": []
								},
								{
									"func": "if_func_exists",
									"arguments": {},
									"children": [
										{
											"func": "fbmessenger_dns_consistency_check",
											"arguments": {
												"endpoint_name": "external_cdn"
											},
											"children": []
										}
									]
								},
								{
									"func": "make_endpoints_for_port",
									"arguments": {
										"port": 443
									},
									"children": []
								},
								{
									"func": "new_endpoint_pipeline",
									"arguments": {},
									"children": [
										{
											"func": "tcp_connect",
											"arguments": {},
											"children": []
										},
										{
											"func": "if_func_exists",
											"arguments": {},
											"children": [
												{
													"func": "fbmessenger_tcp_reachability_check",
													"arguments": {
														"endpoint_name": "external_cdn"
													},
													"children": []
												}
											]
										},
										{
											"func": "discard",
											"arguments": {},
											"children": []
										}
									]
								}
							]
						},
						{
							"func": "compose",
							"arguments": {},
							"children": [
								{
									"func": "domain_name",
									"arguments": {
										"domain": "scontent.xx.fbcdn.net"
									},
									"children": []
								},
								{
									"func": "dns_lookup_getaddrinfo",
									"arguments": {},
									"children": []
								},
								{
									"func": "if_func_exists",
									"arguments": {},
									"children": [
										{
											"func": "fbmessenger_dns_consistency_check",
											"arguments": {
												"endpoint_name": "scontent_cdn"
											},
											"children": []
										}
									]
								},
								{
									"func": "make_endpoints_for_port",
									"arguments": {
										"port": 443
									},
									"children": []
								},
								{
									"func": "new_endpoint_pipeline",
									"arguments": {},
									"children": [
										{
											"func": "tcp_connect",
											"arguments": {},
											"children": []
										},
										{
											"func": "if_func_exists",
											"arguments": {},
											"children": [
												{
													"func": "fbmessenger_tcp_reachability_check",
													"arguments": {
														"endpoint_name": "scontent_cdn"
													},
													"children": []
												}
											]
										},
										{
											"func": "discard",
											"arguments": {},
											"children": []
										}
									]
								}
							]
						},
						{
							"func": "compose",
							"arguments": {},
							"children": [
								{
									"func": "domain_name",
									"arguments": {
										"domain": "star.c10r.facebook.com"
									},
									"children": []
								},
								{
									"func": "dns_lookup_getaddrinfo",
									"arguments": {},
									"children": []
								},
								{
									"func": "if_func_exists",
									"arguments": {},
									"children": [
										{
											"func": "fbmessenger_dns_consistency_check",
											"arguments": {
												"endpoint_name": "star"
											},
											"children": []
										}
									]
								},
								{
									"func": "make_endpoints_for_port",
									"arguments": {
										"port": 443
									},
									"children": []
								},
								{
									"func": "new_endpoint_pipeline",
									"arguments": {},
									"children": [
										{
											"func": "tcp_connect",
											"arguments": {},
											"children": []
										},
										{
											"func": "if_func_exists",
											"arguments": {},
											"children": [
												{
													"func": "fbmessenger_tcp_reachability_check",
													"arguments": {
														"endpoint_name": "star"
													},
													"children": []
												}
											]
										},
										{
											"func": "discard",
											"arguments": {},
											"children": []
										}
									]
								}
							]
						}
					]
				}
			}
		}
	],
	"v": 2
}
